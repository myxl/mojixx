(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{13:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"e",function(){return r}),a.d(t,"g",function(){return o}),a.d(t,"f",function(){return s}),a.d(t,"a",function(){return l}),a.d(t,"c",function(){return d}),a.d(t,"b",function(){return u});var i=a(1),n=function(e){return i.a.get("/api/role",{params:e})},r=function(e){return i.a.get("/api/guard-name-roles/".concat(e))},o=function(e){return i.a.get("/api/role/".concat(e,"/permissions"))},s=function(e,t){return i.a.put("/api/role/".concat(e,"/permissions"),{permissions:t})},l=function(e){return i.a.post("/api/role",e)},d=function(e,t){return i.a.patch("".concat("/api/role","/").concat(e),t)},u=function(e){return i.a.delete("".concat("/api/role","/").concat(e))}},131:function(e,t,a){"use strict";var i=a(45);a.n(i).a},132:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,".item[data-v-64d3b3d3] {\n  margin-bottom: 15px;\n}",""])},229:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a(3),r=a(5),o=a(13),s=a(10),l={name:"UserAssignRole",props:["userId","guardName","dialogVisible","provider"],data:function(){return{visible:this.dialogVisible,roles:[],userRoles:[]}},methods:{assignRole:function(){var e,t,a,n=this;(e=this.userId,t=this.provider,a=this.userRoles,i.a.put("/api/admin-user/".concat(e,"/roles/").concat(t),{roles:a})).then(function(e){n.visible=!1,s.a.editSuccess(n)})}},watch:{dialogVisible:function(e){var t,a,n=this;if(this.roles=[],this.userRoles=[],this.visible=e,e){var r=Object(o.e)(this.guardName),s=(t=this.userId,a=this.provider,i.a.get("/api/admin-user/".concat(t,"/roles/").concat(a)));Promise.all([r,s]).then(function(e){var t=[];e[0].data.data.forEach(function(e){t.push(e.name)});var a=[];e[1].data.data.forEach(function(e){a.push(e.name)}),n.roles=t,n.userRoles=a}).catch(function(e){n.visible=!1})}},visible:function(e){this.$emit("update:dialogVisible",e)}}},d=(a(131),a(0));function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={name:"adminUserIndex",components:{UserAssignRole:Object(d.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.$t("assignRole"),visible:e.visible,width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-row",[a("el-checkbox-group",{model:{value:e.userRoles,callback:function(t){e.userRoles=t},expression:"userRoles"}},e._l(e.roles,function(t){return a("el-col",{key:t,staticClass:"item",attrs:{span:8}},[a("el-checkbox",{attrs:{label:t}},[e._v(e._s(t))])],1)}),1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.assignRole}},[e._v(e._s(e.$t("confirm")))])],1)],1)},[],!1,null,"64d3b3d3",null).exports},data:function(){return u({},Object(n.e)(),{assignRoleParams:{id:0,guardName:"admin",provider:this.$provider,dialogVisible:!1},addForm:{name:"",email:"",password:""},editForm:{name:""},addRules:{name:[{required:!0},{min:3,max:255}],email:[{type:"email",required:!0}],password:[{required:!0},{min:8,max:32}]},editRules:{name:[{required:!0},{min:3,max:255}],password:[{min:8,max:32}]}})},methods:{assignRole:function(e){this.assignRoleParams.id=e.id,this.assignRoleParams.dialogVisible=!0},handleEdit:function(e,t){this.editForm.name=t.name,this.nowRowData={index:e,row:t},this.dialogEditFormVisible=!0},handleDelete:function(e,t){var a,r=this;(a=t.id,i.a.delete("/api/admin-user/".concat(a))).then(function(t){Object(n.b)(e,r),r.requestData()})},requestData:function(){var e,t=this;this.loading=!0,(e=u({},this.queryParams,{page:this.pagination.currentPage}),i.a.get("/api/admin-user",{params:e})).then(function(e){Object(n.d)(e,t)})},handleAddAdminUser:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;var a;(a=e.addForm,i.a.post("/api/admin-user",a)).then(function(t){Object(n.a)(e),e.requestData()})})},handleEditAdminUser:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;var a,r;(a=e.nowRowData.row.id,r=e.editForm,i.a.patch("/api/admin-user/".concat(a),r)).then(function(t){Object(n.c)(e)})})}},computed:{updatePermission:function(){return Object(r.a)("admin-user.update")},addPermission:function(){return Object(r.a)("admin-user.store")},deletePermission:function(){return Object(r.a)("admin-user.destroy")},assignRolePermission:function(){return Object(r.a)("admin-user.assign-roles")}},created:function(){this.requestData()}},p=Object(d.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.queryParams,size:"mini"}},[a("el-form-item",{attrs:{label:e.$t("name")}},[a("el-input",{model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("email")}},[a("el-input",{model:{value:e.queryParams.email,callback:function(t){e.$set(e.queryParams,"email",t)},expression:"queryParams.email"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.requestData}},[e._v(e._s(e.$t("search")))]),e._v(" "),e.addPermission?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogAddFormVisible=!0}}},[e._v(e._s(e.$t("add")))]):e._e()],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:e.$t("name")}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:e.$t("email")}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:e.$t("createdAt")}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated_at",label:e.$t("updatedAt")}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"300px",label:e.$t("actions")},scopedSlots:e._u([{key:"default",fn:function(t){return[e.updatePermission?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(e._s(e.$t("edit")))]):e._e(),e._v(" "),e.assignRolePermission?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.assignRole(t.row)}}},[e._v(e._s(e.$t("assignRole")))]):e._e(),e._v(" "),e.deletePermission?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(e.$t("delete")))]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mo-page",attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"current-change":e.requestData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.$t("add"),visible:e.dialogAddFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogAddFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules}},[a("el-form-item",{attrs:{label:e.$t("name"),prop:"name","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("email"),prop:"email","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("password"),prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddFormVisible=!1}}},[e._v(e._s(e.$t("cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddAdminUser}},[e._v(e._s(e.$t("confirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("edit"),visible:e.dialogEditFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogEditFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:e.$t("name"),prop:"name","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("password"),prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditFormVisible=!1}}},[e._v(e._s(e.$t("cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditAdminUser}},[e._v(e._s(e.$t("confirm")))])],1)],1),e._v(" "),a("user-assign-role",{attrs:{"user-id":e.assignRoleParams.id,"guard-name":e.assignRoleParams.guardName,provider:e.assignRoleParams.provider,"dialog-visible":e.assignRoleParams.dialogVisible},on:{"update:dialogVisible":function(t){return e.$set(e.assignRoleParams,"dialogVisible",t)},"update:dialog-visible":function(t){return e.$set(e.assignRoleParams,"dialogVisible",t)}}})],1)},[],!1,null,null,null);t.default=p.exports},3:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"b",function(){return s}),a.d(t,"e",function(){return l});var i=a(10);function n(e,t){t.tableData=e.data.data;var a=e.data.meta;t.pagination={currentPage:a.current_page,pageSize:a.per_page,total:a.total,from:a.from,lastPage:a.last_page,to:a.to},t.loading=!1}var r=function(e){i.a.editSuccess(e),e.dialogEditFormVisible=!1,Object.assign(e.nowRowData.row,e.editForm),e.tableData[e.nowRowData.index]=e.nowRowData.row,e.$refs.editForm.resetFields()},o=function(e){e.dialogAddFormVisible=!1,i.a.createSuccess(e),e.$refs.addForm.resetFields()},s=function(e,t){t.tableData.splice(e,1),i.a.deleteSuccess(t)},l=function(){return{queryParams:{},tableData:[],pagination:{currentPage:1,pageSize:15,total:0,from:1,lastPage:1,to:1},nowRowData:{index:0,row:{}},dialogAddFormVisible:!1,dialogEditFormVisible:!1,formLabelWidth:"120px",loading:!1}}},45:function(e,t,a){var i=a(132);"string"==typeof i&&(i=[[e.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(8)(i,n);i.locals&&(e.exports=i.locals)},5:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var i=a(19),n=function(e){return i.a.getters.permissions.indexOf(e)>=0}}}]);